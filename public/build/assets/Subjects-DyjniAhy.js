import{D as F,g as m,x as S,Y as T,J as L,Q as G,y as J,Z as M,l,c as O,o as Q,w as a,b as e,a as Y,i as Z}from"./app-BOimrL6G.js";import{_ as q}from"./AdminLayout-0bKsuqSC.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-C4qPAGx8.js";import"./SettingsDropdown-sI980SZw.js";import"./aos-Be9VoEg5.js";import"./Breadcrumbs-DZKACuQP.js";const K={class:"d-flex ga-2 justify-end"},P={__name:"Subjects",setup(W){const h=F(),n=m(h.props.subjects||[]),v=S({name:"",description:"",image:null});T();const _=m(null),c=m(!1),k=[{title:"Nombre",key:"name",align:"start"},{title:"Descripción",key:"description"},{title:"Imagen",key:"image_path"},{title:"Acciones",key:"actions",align:"end",sortable:!1}];L(()=>v.image,o=>{if(o&&o instanceof File){const t=new FileReader;t.onload=d=>_.value=d.target.result,t.readAsDataURL(o)}else _.value=null});const p={name:"",description:"",image_path:""},s=m(p),u=G(!1);J(()=>{f()});function j(){u.value=!1,s.value=p,c.value=!0}function C(o){u.value=!0;const t=n.value.find(d=>d.id===o);s.value={id:t.id,name:t.name,description:t.description,image_path:t.image_path},c.value=!0}function y(o){const t=n.value.findIndex(d=>d.id===o);n.value.splice(t,1)}function V(){if(u.value){const o=n.value.findIndex(t=>t.id===s.value.id);n.value[o]=s.value}else s.value.id=n.value.length+1,n.value.push(s.value);c.value=!1}const f=()=>{c.value=!1,v.reset(),M.get(route("subjects.index")).then(o=>{Array.isArray(o.data)?n.value=o.data:o.data.subjects&&Array.isArray(o.data.subjects)?n.value=o.data.subjects:n.value=[]}).catch(()=>{n.value=[]})};return(o,t)=>{const d=l("v-icon"),A=l("v-toolbar-title"),r=l("v-btn"),w=l("v-toolbar"),D=l("v-chip"),R=l("v-data-table"),b=l("v-card"),U=l("v-container"),g=l("v-text-field"),x=l("v-col"),$=l("v-row"),E=l("v-divider"),I=l("v-spacer"),N=l("v-card-actions"),z=l("v-dialog");return Q(),O(q,{title:"Asignaturas",route:"subjects.index"},{default:a(()=>[e(U,null,{default:a(()=>[e(b,{border:"",rounded:"lg"},{default:a(()=>[e(R,{headers:k,"hide-default-footer":n.value.length<11,items:n.value},{top:a(()=>[e(w,{flat:""},{default:a(()=>[e(A,null,{default:a(()=>[e(d,{color:"medium-emphasis",icon:"mdi-subject-multiple",size:"x-small",start:""}),t[4]||(t[4]=Z(" Gestión de asignaturas "))]),_:1}),e(r,{class:"me-2","prepend-icon":"mdi-plus",rounded:"lg",text:"Agregar",border:"",onClick:j})]),_:1})]),"item.name":a(({value:i})=>[e(D,{text:i,border:"thin opacity-25","prepend-icon":"mdi-subject",label:""},{prepend:a(()=>[e(d,{color:"medium-emphasis"})]),_:2},1032,["text"])]),"item.actions":a(({item:i})=>[Y("div",K,[e(d,{color:"medium-emphasis",icon:"mdi-pencil",size:"small",onClick:B=>C(i.id)},null,8,["onClick"]),e(d,{color:"medium-emphasis",icon:"mdi-delete",size:"small",onClick:B=>y(i.id)},null,8,["onClick"])])]),"no-data":a(()=>[e(r,{"prepend-icon":"mdi-backup-restore",rounded:"lg",text:"Reset data",variant:"text",border:"",onClick:f})]),_:1},8,["hide-default-footer","items"])]),_:1})]),_:1}),e(z,{modelValue:c.value,"onUpdate:modelValue":t[3]||(t[3]=i=>c.value=i),"max-width":"500"},{default:a(()=>[e(b,{subtitle:`${u.value?"Update":"Create"} your favorite subject`,title:`${u.value?"Edit":"Add"} a subject`},{text:a(()=>[e($,null,{default:a(()=>[e(x,{cols:"12"},{default:a(()=>[e(g,{modelValue:s.value.name,"onUpdate:modelValue":t[0]||(t[0]=i=>s.value.name=i),label:"Title"},null,8,["modelValue"])]),_:1}),e(x,{cols:"12",md:"6"},{default:a(()=>[e(g,{modelValue:s.value.description,"onUpdate:modelValue":t[1]||(t[1]=i=>s.value.description=i),label:"Author"},null,8,["modelValue"])]),_:1})]),_:1})]),default:a(()=>[e(E),e(N,{class:"bg-surface-light"},{default:a(()=>[e(r,{text:"Cancel",variant:"plain",onClick:t[2]||(t[2]=i=>c.value=!1)}),e(I),e(r,{text:"Save",onClick:V})]),_:1})]),_:1},8,["subtitle","title"])]),_:1},8,["modelValue"])]),_:1})}}},ie=H(P,[["__scopeId","data-v-20bc2888"]]);export{ie as default};
