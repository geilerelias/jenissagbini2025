import{P as M}from"./PictureInput-CkvSAKg-.js";import{h as k}from"./moment-C5S46NFB.js";import I from"./Links-Xv_uKlSf.js";import{_ as x}from"./AppLayout-B7EUQuuS.js";import{_ as B}from"./Breadcrumbs-DZKACuQP.js";import{l as a,c as g,o as h,w as l,b as o,p as F,z as b,A as _,h as T,i as c,a as O}from"./app-BOimrL6G.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-C4qPAGx8.js";k.locale("es");const P={components:{"picture-input":M,"links-component":I,AppLayout:x,BreadCrumbs:B},props:["notice"],data:()=>({prefill:"",imageMiniatura:"",menu:!1,menu2:!1,valid:!0,lazy:!1,snackbar:!1,response:"",newNotice:{id:"",image:"",title:"",city:"",date:"",time:"",description:"",links:[]},titleRules:[e=>!!e||"El t√≠tulo es requerido",e=>e&&e.length<=60||"El t√≠tulo no puede tener mas de 60 caracteres"],cityRules:[e=>!!e||"La ciudad o lugar son requeridas"],dateRules:[e=>!!e||"La fecha es requerida"],timeRules:[e=>!!e||"La hora es requerida"],descriptionRules:[e=>!!e||"La descripci√≥n es requerida"],imageRules:[e=>!e||e.size<5e6||"El tama√±o de la imagen debe ser inferior a 5 MB!"],customStrings:{upload:"<p> Su dispositivo no admite la carga de archivos. </p>",drag:"Arrastre una imagen o <br> haga clic aqu√≠ para seleccionar üòº",tap:"Toque aqu√≠ para seleccionar una foto <br> de su galer√≠a",change:"Cambiar",remove:"Eliminar",select:"Selecciona una foto",fileType:"Este tipo de archivo no es compatible."},items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Noticias",disabled:!1,href:"/notices"},{text:"Editar",disabled:!0,href:"#"}]}),mounted:function(){this.notice.links=JSON.parse(this.notice.links),this.prefill=encodeURI("/storage/"+this.notice.image),console.log(this.prefill)},methods:{closeDialog(){this.$emit("closeDialog",!1)},onChange(e){console.log("New picture selected!"),e?this.notice.image=this.$refs.pictureInput.file:console.log("FileReader API not supported: use the <form>, Luke!")},editNotice(){console.log("edit notice"),this.notice.image=this.$refs.pictureInput.file;let e=new FormData;e.append("image",this.notice.image),e.append("title",this.notice.title),e.append("city",this.notice.city),e.append("date",this.notice.date),e.append("time",this.notice.time),e.append("description",this.notice.description);let t=this.notice.links;e.append("links",JSON.stringify(t)),console.log(this.notice);try{axios.post(`/notices/update/${this.notice.id}`,e).then(i=>{this.$swal("Editada!","Su noticia ha sido editada exitosamente!","success").then(d=>{this.$inertia.get(route("notices.index"))})}).catch(i=>{const d=i.response.data.errors;let m="";for(var s in d)m+=s+": "+d[s]+`
 `;this.$swal("Error!",m,"error")})}catch(i){console.log(i)}},validate(){this.$refs.form.validate()&&this.editNotice()},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()}},computed:{computedDateFormattedMomentjs(){return this.notice.date?k(this.notice.date).format("dddd, D MMMM YYYY"):""}}};function Y(e,t,i,d,m,s){const V=a("bread-crumbs"),y=a("picture-input"),r=a("v-col"),u=a("v-text-field"),w=a("v-date-picker"),p=a("v-menu"),C=a("v-time-picker"),N=a("v-row"),R=a("v-label"),E=a("vue-editor"),S=a("v-form"),q=a("v-card-text"),A=a("links-component"),f=a("v-btn"),U=a("v-card-actions"),v=a("v-container"),z=a("v-card"),D=a("AppLayout");return h(),g(D,null,{default:l(()=>[o(V,{name:"Editar noticias",items:e.items},null,8,["items"]),o(v,{fluid:""},{default:l(()=>[o(z,{class:"rounded-0"},{default:l(()=>[o(v,{fluid:""},{default:l(()=>[o(q,null,{default:l(()=>[o(S,{onSubmit:F(s.editNotice,["prevent"]),ref:"form",modelValue:e.valid,"onUpdate:modelValue":t[10]||(t[10]=n=>e.valid=n),"lazy-validation":e.lazy,enctype:"multipart/form-data"},{default:l(()=>[o(N,null,{default:l(()=>[o(r,{cols:"12"},{default:l(()=>[o(y,{prefill:e.prefill,crop:!1,width:e.$vuetify.breakpoint.xsOnly?300:1e3,height:e.$vuetify.breakpoint.xsOnly?200:300,zIndex:0,ref:"pictureInput",onChange:s.onChange,accept:"image/jpeg,image/png,,image/jpg",removable:!0,"button-class":"v-btn v-btn--contained theme--light v-size--small info",removeButtonClass:"v-btn v-btn--contained theme--light v-size--small error",customStrings:e.customStrings},null,8,["prefill","width","height","onChange","customStrings"])]),_:1}),o(r,{cols:"12"},{default:l(()=>[o(u,{clearable:"",modelValue:i.notice.title,"onUpdate:modelValue":t[0]||(t[0]=n=>i.notice.title=n),rules:e.titleRules,label:"T√≠tulo",required:"",counter:"60"},null,8,["modelValue","rules"])]),_:1}),o(r,{sm:"4",cols:"12"},{default:l(()=>[o(u,{clearable:"",modelValue:i.notice.city,"onUpdate:modelValue":t[1]||(t[1]=n=>i.notice.city=n),rules:e.cityRules,label:"Ciudad o lugar",required:""},null,8,["modelValue","rules"])]),_:1}),o(r,{sm:"4",cols:"12"},{default:l(()=>[o(p,{modelValue:e.menu,"onUpdate:modelValue":t[4]||(t[4]=n=>e.menu=n),"close-on-content-click":!1,transition:"scale-transition","max-width":"290"},{activator:l(({on:n})=>[o(u,b({value:s.computedDateFormattedMomentjs,rules:e.dateRules,clearable:"",label:"Fecha",readonly:""},_(n)),null,16,["value","rules"])]),default:l(()=>[o(w,{modelValue:i.notice.date,"onUpdate:modelValue":t[2]||(t[2]=n=>i.notice.date=n),onChange:t[3]||(t[3]=n=>e.menu=!1),locale:"es"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),o(r,{sm:"4",cols:"12"},{default:l(()=>[o(p,{ref:"menu",modelValue:e.menu2,"onUpdate:modelValue":t[8]||(t[8]=n=>e.menu2=n),"close-on-content-click":!1,"nudge-right":40,"return-value":i.notice.time,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},{activator:l(({on:n})=>[o(u,b({modelValue:i.notice.time,"onUpdate:modelValue":t[5]||(t[5]=L=>i.notice.time=L),label:"Hora",rules:e.timeRules,readonly:""},_(n)),null,16,["modelValue","rules"])]),default:l(()=>[e.menu2?(h(),g(C,{key:0,modelValue:i.notice.time,"onUpdate:modelValue":t[6]||(t[6]=n=>i.notice.time=n),"full-width":"","onClick:minute":t[7]||(t[7]=n=>e.$refs.menu.save(i.notice.time))},null,8,["modelValue"])):T("",!0)]),_:1},8,["modelValue","return-value"])]),_:1})]),_:1}),o(R,{for:"myTextEditor"},{default:l(()=>t[12]||(t[12]=[c("Descripci√≥n")])),_:1}),o(E,{ref:"myTextEditor",rules:e.descriptionRules,modelValue:i.notice.description,"onUpdate:modelValue":t[9]||(t[9]=n=>i.notice.description=n)},null,8,["rules","modelValue"])]),_:1},8,["onSubmit","modelValue","lazy-validation"])]),_:1}),o(A,{ref:"linksComponets",class:"mt-4",onAddLink:t[11]||(t[11]=n=>i.notice.links=n),link:Array.isArray(i.notice.links)?i.notice.links:JSON.parse(i.notice.links)},null,8,["link"]),o(U,null,{default:l(()=>[t[15]||(t[15]=O("div",{class:"flex-grow-1"},null,-1)),o(f,{color:"warning",class:"mr-4",onClick:s.reset},{default:l(()=>t[13]||(t[13]=[c(" Reset Form ")])),_:1},8,["onClick"]),o(f,{color:"success",disabled:!e.valid,class:"mr-4",onClick:s.validate},{default:l(()=>t[14]||(t[14]=[c(" Editar ")])),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const $=j(P,[["render",Y]]);export{$ as default};
