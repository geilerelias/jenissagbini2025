import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{l as i,c as $,o as B,w as s,b as l,a as v,i as a,t as x,z,A as P}from"./app-BOimrL6G.js";const j={data:()=>({dialog:!1,headers:[{text:"Id",align:"left",sortable:!1,value:"id"},{text:"Titulo",value:"title"},{text:"Entidad",value:"entity"},{text:"A√±o",value:"year"},{text:"Descripci√≥n",value:"description"},{text:"Estado",value:"state"},{text:"Actions",value:"action",sortable:!1}],items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Proyectos",disabled:!1,href:"/dashboard/project"},{text:"Planes de Negocios ",disabled:!0,href:"/dashboard/project/business"}],businesses:[],editedIndex:-1,editedItem:{id:"",title:"",description:"",year:"",entity:"",state:""},defaultItem:{id:"",title:"",description:"",year:"",entity:"",state:""},states:["Abierto","Cerrado","Terminado"],search:"",valid:!0,titleRules:[t=>!!t||"Titulo es requirido"],yearRules:[t=>!!t||"A√±o es requerido"],entityRules:[t=>!!t||"Entidad promotora es requerida"],descriptionRules:[t=>!!t||"Descripci√≥n es requerida"],stateRules:[t=>!!t||"Estado  es requerido"],states:["Abierto","Cerrado","Terminado"],lazy:!1}),computed:{formTitle(){return this.editedIndex===-1?"New Item":"Edit Item"}},watch:{dialog(t){t||this.close()}},mounted(){this.initialize()},methods:{initialize(){this.businesses=[{title:`
                        PLAN DE NEGOCIO ‚ÄúCREACIOÃÅN DE UNA COMERCIALIZADORA DE SEMOVIENTES, PRODUCTOS Y SERVICIOS PECUARIOS EN LA ZONA NORTE
                        DEL DEPARTAMENTO DEL CESAR‚Äù.
                      `,description:`
                        Plan de Negocios orientado a la creaci√≥n de una empresa digital regional lamada ‚ÄúGanaventas‚Äù en el sector
                        agrario cuyas principales actividades son: AsesoriÃÅas y evaluacioÃÅn de proyectos productivos destinados al sector pecuario,
                        Comercializar Ganados, compra y venta de tierra, maquinaria usadas agriÃÅcolas.
                      `,state:"Terminado",id:0}],this.axios.get("/api/business").then(t=>{this.businesses=this.businesses.concat(t.data)}).catch(t=>{console.log(t)})},editItem(t){this.editedIndex=this.businesses.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){const e=this.businesses.indexOf(t);Swal.fire({title:"Est√°s seguro?",html:`Eliminar <b>${t.title}</b>, No podr√°s revertir esto!`,type:"warning",showCancelButton:!0,confirmButtonColor:"#424242",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!"}).then(r=>{console.log("item.id",t.id),r.value&&axios.delete(`/api/business/${t.id}`).then(u=>{Swal.fire("Eliminado!","Eliminado correctamente.","success"),this.businesses.splice(e,1)}).catch(u=>{Swal.fire("Oops...","Algo sali√≥ mal!"+u,"error")})})},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},save(){if(this.validate())if(this.editedIndex>-1)this.edit();else{const t=this.editedItem;axios.post("/api/business",t).then(e=>{const r=e.data;this.businesses.push(r),Swal.fire("Buen trabajo! üòÉ","Registro Exitoso! ","success")}).catch(e=>{console.error(e)}),this.close()}else Swal.fire({type:"error",title:"Oops...",text:"Campos no validados!"})},edit(){const t=this.editedItem,e=this.editedIndex,r=this.editedItem;axios.put(`/api/business/${this.businesses[e].id}`,t).then(u=>{Object.assign(this.businesses[e],r),Swal.fire("Buen trabajo!","Editado correctamente!","success"),this.close()}).catch(u=>{Swal.fire({type:"error",title:"Oops...",text:"Algo sali√≥ mal!"})})},validate(){return this.$refs.form.validate()?!0:(console.log("fallo la validacion"),!1)},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()}}};function q(t,e,r,u,L,n){const y=i("v-breadcrumbs"),m=i("v-icon"),d=i("v-btn"),b=i("v-toolbar-title"),C=i("v-divider"),p=i("v-text-field"),g=i("v-toolbar"),V=i("v-data-table"),I=i("v-card"),E=i("v-toolbar-items"),f=i("v-col"),k=i("v-date-picker"),w=i("v-menu"),R=i("v-select"),A=i("v-textarea"),O=i("v-row"),N=i("v-form"),S=i("v-container"),T=i("v-card-text"),D=i("v-card-actions"),U=i("v-dialog"),_=i("v-app");return B(),$(_,null,{default:s(()=>[l(y,{items:t.items},null,8,["items"]),l(I,null,{default:s(()=>[l(g,{dark:"",flat:""},{default:s(()=>[l(d,{icon:"",onClick:e[0]||(e[0]=o=>t.$router.push({name:"project/main"}))},{default:s(()=>[l(m,null,{default:s(()=>e[15]||(e[15]=[a("mdi-arrow-left")])),_:1})]),_:1}),l(b,null,{default:s(()=>e[16]||(e[16]=[a("Planes de Negocios Desarrollados")])),_:1}),l(C,{class:"mx-4",inset:"",vertical:""}),e[18]||(e[18]=v("div",{class:"flex-grow-1"},null,-1)),l(p,{"max-width":"200",modelValue:t.search,"onUpdate:modelValue":e[1]||(e[1]=o=>t.search=o),"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},null,8,["modelValue"]),l(d,{icon:"",onClick:e[2]||(e[2]=o=>t.dialog=!t.dialog)},{default:s(()=>[l(m,null,{default:s(()=>e[17]||(e[17]=[a("mdi-plus-circle")])),_:1})]),_:1})]),_:1}),l(V,{headers:t.headers,search:t.search,items:t.businesses,class:"elevation-1"},{"item.action":s(({item:o})=>[l(m,{small:"",class:"mr-2",onClick:c=>n.editItem(o)},{default:s(()=>e[19]||(e[19]=[a(" mdi-pencil ")])),_:2},1032,["onClick"]),l(m,{small:"",onClick:c=>n.deleteItem(o)},{default:s(()=>e[20]||(e[20]=[a(" mdi-delete ")])),_:2},1032,["onClick"])]),"no-data":s(()=>[l(d,{color:"primary",onClick:n.initialize},{default:s(()=>e[21]||(e[21]=[a("Reset")])),_:1},8,["onClick"])]),_:1},8,["headers","search","items"])]),_:1}),l(U,{modelValue:t.dialog,"onUpdate:modelValue":e[14]||(e[14]=o=>t.dialog=o),fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},{default:s(()=>[l(I,null,{default:s(()=>[l(g,{dark:""},{default:s(()=>[l(d,{icon:"",dark:"",onClick:e[3]||(e[3]=o=>t.dialog=!t.dialog)},{default:s(()=>[l(m,null,{default:s(()=>e[22]||(e[22]=[a("mdi-close")])),_:1})]),_:1}),l(b,{class:"headline"},{default:s(()=>[a(x(n.formTitle),1)]),_:1}),e[24]||(e[24]=v("div",{class:"flex-grow-1"},null,-1)),l(E,null,{default:s(()=>[l(d,{text:"",disabled:!t.valid,class:"mr-4",onClick:n.validate},{default:s(()=>e[23]||(e[23]=[a(" Registrar ")])),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),l(T,null,{default:s(()=>[l(S,null,{default:s(()=>[l(N,{ref:"form",modelValue:t.valid,"onUpdate:modelValue":e[13]||(e[13]=o=>t.valid=o),"lazy-validation":t.lazy},{default:s(()=>[l(O,null,{default:s(()=>[l(f,{cols:"12",sm:"6",md:"4"},{default:s(()=>[l(p,{clearable:"",modelValue:t.editedItem.title,"onUpdate:modelValue":e[4]||(e[4]=o=>t.editedItem.title=o),rules:t.titleRules,label:"Titulo",required:""},null,8,["modelValue","rules"])]),_:1}),l(f,{cols:"12",sm:"6",md:"4"},{default:s(()=>[l(p,{clearable:"",modelValue:t.editedItem.entity,"onUpdate:modelValue":e[5]||(e[5]=o=>t.editedItem.entity=o),rules:t.entityRules,label:"Entidad promotora",required:""},null,8,["modelValue","rules"])]),_:1}),l(f,{cols:"12",sm:"6",md:"4"},{default:s(()=>[l(w,{ref:"menu",modelValue:t.menu,"onUpdate:modelValue":e[10]||(e[10]=o=>t.menu=o),"close-on-content-click":!1,"return-value":t.editedItem.year,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},{activator:s(({on:o})=>[l(p,z({modelValue:t.editedItem.year,"onUpdate:modelValue":e[6]||(e[6]=c=>t.editedItem.year=c),rules:t.yearRules,label:"Fecha",readonly:""},P(o)),null,16,["modelValue","rules"])]),default:s(()=>[l(k,{modelValue:t.editedItem.year,"onUpdate:modelValue":e[9]||(e[9]=o=>t.editedItem.year=o),type:"month",locale:"es","no-title":"",scrollable:""},{default:s(()=>[e[27]||(e[27]=v("div",{class:"flex-grow-1"},null,-1)),l(d,{text:"",color:"primary",onClick:e[7]||(e[7]=o=>t.menu=!1)},{default:s(()=>e[25]||(e[25]=[a("Cancel")])),_:1}),l(d,{text:"",color:"primary",onClick:e[8]||(e[8]=o=>t.$refs.menu.save(t.editedItem.year))},{default:s(()=>e[26]||(e[26]=[a("OK")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","return-value"])]),_:1}),l(f,{cols:"12",sm:"6",md:"4"},{default:s(()=>[l(R,{rules:t.stateRules,modelValue:t.editedItem.state,"onUpdate:modelValue":e[11]||(e[11]=o=>t.editedItem.state=o),items:t.states,"menu-props":{top:!0,offsetY:!0},label:"Estado"},null,8,["rules","modelValue","items"])]),_:1}),l(f,{cols:"12"},{default:s(()=>[l(A,{clearable:"",modelValue:t.editedItem.description,"onUpdate:modelValue":e[12]||(e[12]=o=>t.editedItem.description=o),rules:t.descriptionRules,label:"Descripci√≥n"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue","lazy-validation"])]),_:1})]),_:1}),l(D,null,{default:s(()=>[e[31]||(e[31]=v("div",{class:"flex-grow-1"},null,-1)),l(d,{color:"warning",class:"mr-4",onClick:n.close},{default:s(()=>e[28]||(e[28]=[a(" Cancelar ")])),_:1},8,["onClick"]),l(d,{color:"error",class:"mr-4",onClick:n.reset},{default:s(()=>e[29]||(e[29]=[a(" Reiniciar ")])),_:1},8,["onClick"]),l(d,{disabled:!t.valid,color:"success",class:"mr-4",onClick:n.save},{default:s(()=>e[30]||(e[30]=[a(" Guardar ")])),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const Y=h(j,[["render",q]]);export{Y as default};
