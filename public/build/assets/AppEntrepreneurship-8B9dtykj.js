import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{l as o,c as A,o as O,w as i,b as l,a as c,i as a,t as T}from"./app-BOimrL6G.js";const U={data:()=>({dialog:!1,headers:[{text:"Id",align:"left",sortable:!1,value:"id"},{text:"Titulo",value:"title"},{text:"Descripcion",value:"description"},{text:"Estado",value:"state"},{text:"Actions",value:"action",sortable:!1}],items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Proyectos",disabled:!1,href:"/dashboard/project"},{text:"Emprendimientos",disabled:!0,href:"/dashboard/project/entrepreneurship"}],entrepreneurships:[],editedIndex:-1,editedItem:{id:"",title:"",description:"",state:""},defaultItem:{id:"",title:"",description:"",state:""},states:["Abierto","Cerrado"],search:"",valid:!0,titleRules:[t=>!!t||"Titulo es requirido"],descriptionRules:[t=>!!t||"Descripción es requerida"],stateRules:[t=>!!t||"Estado es requerido"],lazy:!1}),computed:{formTitle(){return this.editedIndex===-1?"New Item":"Edit Item"}},watch:{dialog(t){t||this.close()}},mounted(){this.initialize()},methods:{initialize(){this.entrepreneurships=[{title:"HUMUS DEL CESAR S.A.S.",description:`
                        Socia de una empresa privada tipo S.A.S. dedicada a la producción y comercialización
                        de abonos orgánicos y a la prestación de servicios en diseño y elaboración de jardines.
                        Empresa que funcionó en Valledupar y se destacó por su liderazgo en la zona caribeña
                        pues sus productos y servicios tuvieron una cobertura significativa por su buena calidad y
                        excelente servicio a nivel institucional para clientes como Homecenter, Centro Comercial Guatapurí Plaza
                        y profesionales independientes del sector agrícola.
                      `,state:"cerrado",id:0}],this.axios.get("/api/entrepreneurship").then(t=>{this.entrepreneurships=this.entrepreneurships.concat(t.data)}).catch(t=>{console.log(t)})},editItem(t){this.editedIndex=this.entrepreneurships.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){const e=this.entrepreneurships.indexOf(t);Swal.fire({title:"Estás seguro?",html:`Eliminar <b>${t.title}</b>, No podrás revertir esto!`,type:"warning",showCancelButton:!0,confirmButtonColor:"#424242",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!"}).then(d=>{console.log("item.id",t.id),d.value&&axios.delete(`/api/entrepreneurship/${t.id}`).then(u=>{Swal.fire("Eliminado!","Eliminado correctamente.","success"),this.entrepreneurships.splice(e,1)}).catch(u=>{Swal.fire("Oops...","Algo salió mal!"+u,"error")})})},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},save(){if(this.validate())if(this.editedIndex>-1)this.edit();else{const t=this.editedItem;axios.post("/api/entrepreneurship",t).then(e=>{const d=e.data;this.entrepreneurships.push(d),Swal.fire("Buen trabajo! 😃","Registro Exitoso! ","success")}).catch(e=>{console.error(e)}),this.close()}else Swal.fire({type:"error",title:"Oops...",text:"Campos no validados!"})},edit(){const t=this.editedItem,e=this.editedIndex,d=this.editedItem;axios.put(`/api/entrepreneurship/${this.entrepreneurships[e].id}`,t).then(u=>{Object.assign(this.entrepreneurships[e],d),Swal.fire("Buen trabajo!","Editado correctamente!","success"),this.close()}).catch(u=>{Swal.fire({type:"error",title:"Oops...",text:"Algo salió mal!"})})},validate(){return this.$refs.form.validate()?!0:(console.log("fallo la validacion"),!1)},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()}}};function $(t,e,d,u,D,r){const g=o("v-breadcrumbs"),m=o("v-icon"),n=o("v-btn"),f=o("v-toolbar-title"),_=o("v-divider"),v=o("v-text-field"),b=o("v-toolbar"),C=o("v-data-table"),h=o("v-card"),I=o("v-toolbar-items"),p=o("v-col"),V=o("v-textarea"),k=o("v-select"),w=o("v-row"),y=o("v-form"),S=o("v-container"),E=o("v-card-text"),x=o("v-card-actions"),z=o("v-dialog"),R=o("v-app");return O(),A(R,null,{default:i(()=>[l(g,{items:t.items},null,8,["items"]),l(h,null,{default:i(()=>[l(b,{dark:"",flat:""},{default:i(()=>[l(n,{icon:"",onClick:e[0]||(e[0]=s=>t.$router.push({name:"project/main"}))},{default:i(()=>[l(m,null,{default:i(()=>e[9]||(e[9]=[a("mdi-arrow-left")])),_:1})]),_:1}),l(f,null,{default:i(()=>e[10]||(e[10]=[a("Emprendimientos ")])),_:1}),l(_,{class:"mx-4",inset:"",vertical:""}),e[12]||(e[12]=c("div",{class:"flex-grow-1"},null,-1)),l(v,{"max-width":"200",modelValue:t.search,"onUpdate:modelValue":e[1]||(e[1]=s=>t.search=s),"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},null,8,["modelValue"]),l(n,{icon:"",onClick:e[2]||(e[2]=s=>t.dialog=!t.dialog)},{default:i(()=>[l(m,null,{default:i(()=>e[11]||(e[11]=[a("mdi-plus-circle")])),_:1})]),_:1})]),_:1}),l(C,{headers:t.headers,search:t.search,items:t.entrepreneurships,class:"elevation-1"},{"item.action":i(({item:s})=>[l(m,{small:"",class:"mr-2",onClick:j=>r.editItem(s)},{default:i(()=>e[13]||(e[13]=[a(" mdi-pencil ")])),_:2},1032,["onClick"]),l(m,{small:"",onClick:j=>r.deleteItem(s)},{default:i(()=>e[14]||(e[14]=[a(" mdi-delete ")])),_:2},1032,["onClick"])]),"no-data":i(()=>[l(n,{color:"primary",onClick:r.initialize},{default:i(()=>e[15]||(e[15]=[a("Reset")])),_:1},8,["onClick"])]),_:1},8,["headers","search","items"])]),_:1}),l(z,{modelValue:t.dialog,"onUpdate:modelValue":e[8]||(e[8]=s=>t.dialog=s),fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},{default:i(()=>[l(h,null,{default:i(()=>[l(b,{dark:""},{default:i(()=>[l(n,{icon:"",dark:"",onClick:e[3]||(e[3]=s=>t.dialog=!t.dialog)},{default:i(()=>[l(m,null,{default:i(()=>e[16]||(e[16]=[a("mdi-close")])),_:1})]),_:1}),l(f,{class:"headline"},{default:i(()=>[a(T(r.formTitle),1)]),_:1}),e[18]||(e[18]=c("div",{class:"flex-grow-1"},null,-1)),l(I,null,{default:i(()=>[l(n,{text:"",disabled:!t.valid,class:"mr-4",onClick:r.validate},{default:i(()=>e[17]||(e[17]=[a(" Registrar ")])),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),l(E,null,{default:i(()=>[l(S,null,{default:i(()=>[l(y,{ref:"form",modelValue:t.valid,"onUpdate:modelValue":e[7]||(e[7]=s=>t.valid=s),"lazy-validation":t.lazy},{default:i(()=>[l(w,null,{default:i(()=>[l(p,{cols:"12"},{default:i(()=>[l(v,{rules:t.titleRules,modelValue:t.editedItem.title,"onUpdate:modelValue":e[4]||(e[4]=s=>t.editedItem.title=s),label:"Título"},null,8,["rules","modelValue"])]),_:1}),l(p,{cols:"12"},{default:i(()=>[l(V,{rules:t.descriptionRules,modelValue:t.editedItem.description,"onUpdate:modelValue":e[5]||(e[5]=s=>t.editedItem.description=s),label:"Descripción"},null,8,["rules","modelValue"])]),_:1}),l(p,{cols:"12",sm:"6",md:"4"},{default:i(()=>[l(k,{rules:t.stateRules,modelValue:t.editedItem.state,"onUpdate:modelValue":e[6]||(e[6]=s=>t.editedItem.state=s),items:t.states,"menu-props":{top:!0,offsetY:!0},label:"Estado"},null,8,["rules","modelValue","items"])]),_:1})]),_:1})]),_:1},8,["modelValue","lazy-validation"])]),_:1})]),_:1}),l(x,null,{default:i(()=>[e[22]||(e[22]=c("div",{class:"flex-grow-1"},null,-1)),l(n,{color:"warning",class:"mr-4",onClick:r.close},{default:i(()=>e[19]||(e[19]=[a(" Cancelar ")])),_:1},8,["onClick"]),l(n,{color:"error",class:"mr-4",onClick:r.reset},{default:i(()=>e[20]||(e[20]=[a(" Reiniciar ")])),_:1},8,["onClick"]),l(n,{disabled:!t.valid,color:"success",class:"mr-4",onClick:r.save},{default:i(()=>e[21]||(e[21]=[a(" Guardar ")])),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const G=B(U,[["render",$]]);export{G as default};
