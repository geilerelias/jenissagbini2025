import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{l as s,c as U,o as z,w as o,b as l,a as v,i as a,t as A,z as B,A as j}from"./app-BOimrL6G.js";const D={data:()=>({menu:!1,dialog:!1,headers:[{text:"Id",align:"left",sortable:!1,value:"id"},{text:"Titulo",value:"title"},{text:"A√±o",value:"year"},{text:"Entidad",value:"entity"},{text:"Accion",align:"left",sortable:!1,value:"action"}],items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Proyectos",disabled:!1,href:"/dashboard/project"},{text:"Tesis de Grado Dirigidas",disabled:!0,href:"/dashboard/project/thesis"}],thesiss:[],editedIndex:-1,editedItem:{title:"",year:"",entity:"",people:""},defaultItem:{title:"",year:"",entity:"",people:""},search:"",valid:!0,titleRules:[t=>!!t||"Titulo es requirido"],yearRules:[t=>!!t||"A√±o es requerido"],entityRules:[t=>!!t||"Entidad promotora es requerida"],peopleRules:[t=>/^[A-Za-z√±√°√©√≠√≥√∫√ë√Å√â√ç√ì√ö. ]*$/.test(t)||"Nombre de Personas dirigidas validos"],lazy:!1}),computed:{formTitle(){return this.editedIndex===-1?"Nuevo Item":"Editar Item"}},watch:{dialog(t){t||this.close()}},mounted(){this.initialize()},methods:{initialize(){this.thesiss=[{id:0,title:"EMPRENDIMIENTO DIGITAL ‚ÄúSOMOS UNO‚Äù.",created_at:"2019-10-11 03:09:46",updated_at:"2019-10-11 03:09:46",year:"2018-01",entity:"Universidad Popular del Cesar. ",people:"Aldair Nu√±ez Florian."}],this.axios.get("/api/thesis").then(t=>{this.thesiss=this.thesiss.concat(t.data)}).catch(t=>{console.log(t)})},editItem(t){this.editedIndex=this.thesiss.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){const e=this.thesiss.indexOf(t);Swal.fire({title:"Est√°s seguro?",html:`Eliminar <b>${t.title}</b>, No podr√°s revertir esto!`,type:"warning",showCancelButton:!0,confirmButtonColor:"#424242",cancelButtonColor:"#d33",confirmButtonText:"S√≠,, Eliminar!"}).then(r=>{console.log("item.id",t.id),r.value&&axios.delete(`/api/thesis/${t.id}`).then(u=>{Swal.fire("Eliminado!","Eliminado correctamente.","success"),this.thesiss.splice(e,1)}).catch(u=>{Swal.fire("Oops...","Algo sali√≥ mal!"+u,"error")})})},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},save(){if(this.validate())if(this.editedIndex>-1)this.edit();else{const t=this.editedItem;axios.post("/api/thesis",t).then(e=>{const r=e.data;this.thesiss.push(r),Swal.fire("Buen trabajo! üòÉ","Registro Exitoso! ","success")}).catch(e=>{console.error(e)}),this.close()}else Swal.fire({type:"error",title:"Oops...",text:"Campos no validados!"})},edit(){const t=this.editedItem,e=this.editedIndex,r=this.editedItem;axios.put(`/api/thesis/${this.thesiss[e].id}`,t).then(u=>{Object.assign(this.thesiss[e],r),Swal.fire("Buen trabajo!","Editado correctamente!","success"),this.close()}).catch(u=>{Swal.fire({type:"error",title:"Oops...",text:"Algo sali√≥ mal!"})})},validate(){return this.$refs.form.validate()?!0:(console.log("fallo la validacion"),!1)},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()}}};function P(t,e,r,u,q,n){const I=s("v-breadcrumbs"),m=s("v-icon"),d=s("v-btn"),c=s("v-toolbar-title"),h=s("v-divider"),f=s("v-text-field"),g=s("v-toolbar"),V=s("v-data-table"),y=s("v-card"),C=s("v-toolbar-items"),p=s("v-col"),k=s("v-date-picker"),w=s("v-menu"),_=s("v-textarea"),E=s("v-row"),O=s("v-form"),R=s("v-container"),S=s("v-card-text"),T=s("v-card-actions"),$=s("v-dialog"),x=s("v-app");return z(),U(x,null,{default:o(()=>[l(I,{items:t.items},null,8,["items"]),l(y,null,{default:o(()=>[l(g,{dark:"",flat:""},{default:o(()=>[l(d,{icon:"",onClick:e[0]||(e[0]=i=>t.$router.push({name:"project/main"}))},{default:o(()=>[l(m,null,{default:o(()=>e[14]||(e[14]=[a("mdi-arrow-left")])),_:1})]),_:1}),l(c,null,{default:o(()=>e[15]||(e[15]=[a("Tesis de Grado Dirigidas ")])),_:1}),l(h,{class:"mx-4",inset:"",vertical:""}),e[17]||(e[17]=v("div",{class:"flex-grow-1"},null,-1)),l(f,{"max-width":"200",modelValue:t.search,"onUpdate:modelValue":e[1]||(e[1]=i=>t.search=i),"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},null,8,["modelValue"]),l(d,{icon:"",onClick:e[2]||(e[2]=i=>t.dialog=!t.dialog)},{default:o(()=>[l(m,null,{default:o(()=>e[16]||(e[16]=[a("mdi-plus-circle")])),_:1})]),_:1})]),_:1}),l(V,{search:t.search,headers:t.headers,items:t.thesiss,class:"elevation-1"},{"item.action":o(({item:i})=>[l(m,{small:"",class:"mr-2",onClick:b=>n.editItem(i)},{default:o(()=>e[18]||(e[18]=[a(" mdi-pencil ")])),_:2},1032,["onClick"]),l(m,{small:"",onClick:b=>n.deleteItem(i)},{default:o(()=>e[19]||(e[19]=[a(" mdi-delete ")])),_:2},1032,["onClick"])]),"no-data":o(()=>[l(d,{color:"primary",onClick:n.initialize},{default:o(()=>e[20]||(e[20]=[a("Reset")])),_:1},8,["onClick"])]),_:1},8,["search","headers","items"])]),_:1}),l($,{modelValue:t.dialog,"onUpdate:modelValue":e[13]||(e[13]=i=>t.dialog=i),fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},{default:o(()=>[l(y,null,{default:o(()=>[l(g,{dark:""},{default:o(()=>[l(d,{icon:"",dark:"",onClick:e[3]||(e[3]=i=>t.dialog=!t.dialog)},{default:o(()=>[l(m,null,{default:o(()=>e[21]||(e[21]=[a("mdi-close")])),_:1})]),_:1}),l(c,{class:"headline"},{default:o(()=>[a(A(n.formTitle),1)]),_:1}),e[23]||(e[23]=v("div",{class:"flex-grow-1"},null,-1)),l(C,null,{default:o(()=>[l(d,{text:"",disabled:!t.valid,class:"mr-4",onClick:n.validate},{default:o(()=>e[22]||(e[22]=[a(" Registrar ")])),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),l(S,null,{default:o(()=>[l(R,{fluid:""},{default:o(()=>[l(O,{ref:"form",modelValue:t.valid,"onUpdate:modelValue":e[12]||(e[12]=i=>t.valid=i),"lazy-validation":t.lazy},{default:o(()=>[l(E,null,{default:o(()=>[l(p,{cols:"12",sm:"6",md:"4"},{default:o(()=>[l(f,{clearable:"",modelValue:t.editedItem.title,"onUpdate:modelValue":e[4]||(e[4]=i=>t.editedItem.title=i),rules:t.titleRules,label:"Titulo",required:""},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12",sm:"6",md:"4"},{default:o(()=>[l(f,{clearable:"",modelValue:t.editedItem.entity,"onUpdate:modelValue":e[5]||(e[5]=i=>t.editedItem.entity=i),rules:t.entityRules,label:"Entidad promotora",required:""},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12",sm:"6",md:"4"},{default:o(()=>[l(w,{ref:"menu",modelValue:t.menu,"onUpdate:modelValue":e[10]||(e[10]=i=>t.menu=i),"close-on-content-click":!1,"return-value":t.editedItem.year,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},{activator:o(({on:i})=>[l(f,B({modelValue:t.editedItem.year,"onUpdate:modelValue":e[6]||(e[6]=b=>t.editedItem.year=b),rules:t.yearRules,label:"Fecha",readonly:""},j(i)),null,16,["modelValue","rules"])]),default:o(()=>[l(k,{modelValue:t.editedItem.year,"onUpdate:modelValue":e[9]||(e[9]=i=>t.editedItem.year=i),type:"month",locale:"es","no-title":"",scrollable:""},{default:o(()=>[e[26]||(e[26]=v("div",{class:"flex-grow-1"},null,-1)),l(d,{text:"",color:"primary",onClick:e[7]||(e[7]=i=>t.menu=!1)},{default:o(()=>e[24]||(e[24]=[a("Cancel")])),_:1}),l(d,{text:"",color:"primary",onClick:e[8]||(e[8]=i=>t.$refs.menu.save(t.editedItem.year))},{default:o(()=>e[25]||(e[25]=[a("OK")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","return-value"])]),_:1}),l(p,{cols:"12"},{default:o(()=>[l(_,{clearable:"",modelValue:t.editedItem.people,"onUpdate:modelValue":e[11]||(e[11]=i=>t.editedItem.people=i),rules:t.peopleRules,label:"Personas orientadas"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue","lazy-validation"])]),_:1})]),_:1}),l(T,null,{default:o(()=>[e[30]||(e[30]=v("div",{class:"flex-grow-1"},null,-1)),l(d,{color:"warning",class:"mr-4",onClick:n.close},{default:o(()=>e[27]||(e[27]=[a(" Cancelar ")])),_:1},8,["onClick"]),l(d,{color:"error",class:"mr-4",onClick:n.reset},{default:o(()=>e[28]||(e[28]=[a(" Reiniciar ")])),_:1},8,["onClick"]),l(d,{disabled:!t.valid,color:"success",class:"mr-4",onClick:n.save},{default:o(()=>e[29]||(e[29]=[a(" Guardar ")])),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const F=N(D,[["render",P]]);export{F as default};
