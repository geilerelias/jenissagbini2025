import{_ as E}from"./Breadcrumbs-DZKACuQP.js";import{_ as T}from"./AdminLayout-0bKsuqSC.js";import{l as r,c as u,o as p,w as t,b as s,i as a,a as j,t as M,q as N,z as P,A as S}from"./app-BOimrL6G.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-C4qPAGx8.js";import"./SettingsDropdown-sI980SZw.js";import"./aos-Be9VoEg5.js";const A={name:"Permission",components:{AdminLayout:T,BreadCrumbs:E},props:["data","errors"],data(){return{editMode:!1,isOpen:!1,search:"",form:{id:null,name:null},items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Permission",disabled:!0,href:"/Permission"}],dialog:!1,dialogDelete:!1,headers:[{text:"Id",align:"start",sortable:!1,value:"id"},{text:"Name",value:"name"},{text:"Actions",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{name:""},defaultItem:{name:""}}},computed:{formTitle(){return this.editedIndex===-1?"New Item":"Edit Item"}},watch:{dialog(o){o||this.close()}},methods:{closeModal:function(){this.isOpen=!1,this.reset(),this.editMode=!1},reset(){this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},update(o){o._method="PUT",this.$inertia.post("/permission/"+o.id,o,{onSuccess:e=>{this.$swal({icon:`${e.props.errors.name?"error":"success"}`,title:`${e.props.errors.name?"Oops...":"Good job!"}`,text:`${e.props.errors.name?e.props.errors.name[0]:e.props.flash.message}`})},onError:e=>{this.$swal("Opps...!","Excuse me, an error occurred.","warning")}}),this.reset(),this.closeModal(),this.editMode=!1,this.close()},editItem(o){this.editedIndex=this.data.indexOf(o),this.editedItem=Object.assign({},o),this.dialog=!0},deleteItem(o){o._method="DELETE",this.$swal({title:"Are you sure you want to delete this item?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.isConfirmed&&(this.$inertia.post("/permission/"+o.id,o,{onSuccess:m=>{this.$swal("Deleted!","Your item has been deleted.","success")},onError:m=>{this.$swal("Opps...!","Excuse me, an error occurred.","warning")}}),this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))}),this.reset()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(o){this.editedIndex===-1?this.$inertia.post("/permission",o,{onSuccess:e=>{this.$swal({icon:`${e.props.errors.name?"error":"success"}`,title:`${e.props.errors.name?"Oops...":"¡Buen trabajo!"}`,text:`${e.props.errors.name?e.props.errors.name[0]:e.props.flash.message}`})},onError:e=>{console.log(e),this.$swal({icon:"error",title:"Oops...",text:this.errors.errors.name[0]})}}):this.$inertia.post("/posts/"+o.id,o,{onSuccess:e=>{this.$swal({icon:`${e.props.errors.name?"error":"success"}`,title:`${e.props.errors.name?"Oops...":"¡Buen trabajo!"}`,text:`${e.props.errors.name?e.props.errors.name[0]:e.props.flash.message}`})},onError:e=>{console.log(e),this.$swal({icon:"error",title:"Oops...",text:this.errors.errors.name[0]})}}),this.reset(),this.closeModal(),this.editMode=!1,this.close()},initialize(){location.reload()}}},U={class:"text-h5"};function z(o,e,m,Y,n,l){const b=r("bread-crumbs"),_=r("v-text-field"),I=r("v-divider"),f=r("v-spacer"),d=r("v-btn"),w=r("v-card-title"),k=r("v-col"),C=r("v-row"),h=r("v-container"),g=r("v-card-text"),y=r("v-card-actions"),v=r("v-card"),O=r("v-dialog"),V=r("v-toolbar"),x=r("v-icon"),$=r("v-data-table"),B=r("admin-layout");return p(),u(B,null,{default:t(()=>[s(b,{name:"Permission",items:n.items},null,8,["items"]),s(h,{class:"d-flex justify-center"},{default:t(()=>[s(v,null,{default:t(()=>[s($,{headers:n.headers,items:m.data,"sort-by":"calories",search:n.search,class:"elevation-1"},{top:t(()=>[s(V,{flat:""},{default:t(()=>[s(_,{class:"mr-3",modelValue:n.search,"onUpdate:modelValue":e[0]||(e[0]=i=>n.search=i),"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},null,8,["modelValue"]),s(I,{class:"mx-4",inset:"",vertical:""}),s(f),s(O,{modelValue:n.dialog,"onUpdate:modelValue":e[5]||(e[5]=i=>n.dialog=i),"max-width":"500px"},{activator:t(({on:i,attrs:c})=>[s(d,P({color:"primary",dark:"",class:"mb-2"},c,S(i)),{default:t(()=>e[6]||(e[6]=[a(" New Item ")])),_:2},1040)]),default:t(()=>[s(v,null,{default:t(()=>[s(w,null,{default:t(()=>[j("span",U,M(l.formTitle),1)]),_:1}),s(g,null,{default:t(()=>[s(h,null,{default:t(()=>[s(C,null,{default:t(()=>[s(k,{cols:"12"},{default:t(()=>[s(_,{modelValue:n.editedItem.name,"onUpdate:modelValue":e[1]||(e[1]=i=>n.editedItem.name=i),label:"Name",onKeyup:e[2]||(e[2]=N(i=>n.editedIndex===-1?l.save(n.editedItem):l.update(n.editedItem),["enter"]))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),s(y,null,{default:t(()=>[s(f),s(d,{color:"blue darken-1",text:"",onClick:l.close},{default:t(()=>e[7]||(e[7]=[a(" Cancel ")])),_:1},8,["onClick"]),n.editedIndex===-1?(p(),u(d,{key:0,color:"blue darken-1",text:"",onClick:e[3]||(e[3]=i=>l.save(n.editedItem))},{default:t(()=>e[8]||(e[8]=[a(" Save ")])),_:1})):(p(),u(d,{key:1,color:"blue darken-1",text:"",onClick:e[4]||(e[4]=i=>l.update(n.editedItem))},{default:t(()=>e[9]||(e[9]=[a(" update ")])),_:1}))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":t(({item:i})=>[s(x,{small:"",class:"mr-2",onClick:c=>l.editItem(i)},{default:t(()=>e[10]||(e[10]=[a(" mdi-pencil ")])),_:2},1032,["onClick"]),s(x,{small:"",onClick:c=>l.deleteItem(i)},{default:t(()=>e[11]||(e[11]=[a(" mdi-delete ")])),_:2},1032,["onClick"])]),"no-data":t(()=>[s(d,{color:"primary",onClick:l.initialize},{default:t(()=>e[12]||(e[12]=[a(" Reset ")])),_:1},8,["onClick"])]),_:1},8,["headers","items","search"])]),_:1})]),_:1})]),_:1})}const J=D(A,[["render",z]]);export{J as default};
